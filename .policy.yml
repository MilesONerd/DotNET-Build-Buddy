version: 1

policies:
  - name: "Standard Contribution Policy"
    description: "Ensures all pull requests follow contribution standards and pass moderation checks."

    approval:
      method: "PR Review"
      required_count: 1
      teams:
        - maintainers
      users:
        - MilesONerd
      allow_author: false

    conditions:
      must_not_have_labels:
        - "spam"
        - "ai-generated"
        - "needs-human-review"
      require_branch_up_to_date: true
      require_status_success: true
      require_no_conflicts: true

    actions:
      on_approval:
        - type: "status"
          state: "success"
          description: "‚úÖ All policy checks passed and human approval received."

  - name: "Security and Compliance"
    description: "Blocks PRs that touch sensitive files or violate project security boundaries."
    conditions:
      files:
        modified:
          - path: "infra/**"
          - path: "secrets/**"
          - path: ".github/workflows/**"
      require_labels:
        - "security-review"
    actions:
      on_failure:
        - type: "comment"
          message: "‚ö†Ô∏è This PR modifies sensitive files. A `security-review` label is required before merge."

  - name: "Documentation Updates"
    description: "Automatically approves documentation-only changes."
    conditions:
      files:
        only_modified:
          - "docs/**"
          - "*.md"
    actions:
      on_approval:
        - type: "status"
          state: "success"
          description: "üìù Documentation-only change automatically approved."
